{
    "apps": [
        {
            "name": "premium.rnet.cf",
            "script": "src/index.js",
            "watch": false,
            "exec_mode": "cluster",
            "instances": "max",
            "ignore_watch": [
                "node_modules",
                ".git",
                "public",
                "views",
                "package.json"
            ],
            "watch_options": {
                "followSymlinks": false
            },
			"wait-ready": true,
			"listen_timeout" : 5000
        }
    ],
    "deploy": {
        "premium": {
            "user": "rnet",
            "host": ["10.12.0.43", "10.12.0.44", "10.12.0.45"],
            "ref": "origin/premium",
            "repo": "-b premium https://github.com/ReadOnlyNet/RNet-web.git",
            "path": "/home/rnet/deploy/premium/",
            "pre-setup": "rm -rf /home/rnet/deploy/premium/*",
            "post-deploy": "npm i && gulp sass && cd react && yarn && yarn build:prod && cd .. && cp /home/rnet/premium.rnet.cf/.env ./.env && mkdir /home/rnet/premium.rnet.cf-temp/ && cp -rf /home/rnet/deploy/premium/source/. /home/rnet/premium.rnet.cf-temp && rm -rf /home/rnet/old.premium.rnet.cf && mv /home/rnet/premium.rnet.cf /home/rnet/old.premium.rnet.cf && mv /home/rnet/premium.rnet.cf-temp /home/rnet/premium.rnet.cf && pm2 restart premium.rnet.cf"
        }
    }
}